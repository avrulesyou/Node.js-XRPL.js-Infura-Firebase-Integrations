!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).PKCE=t()}}((function(){return function t(e,r,n){function i(s,a){if(!r[s]){if(!e[s]){var c="function"==typeof require&&require;if(!a&&c)return c(s,!0);if(o)return o(s,!0);var f=new Error("Cannot find module '"+s+"'");throw f.code="MODULE_NOT_FOUND",f}var u=r[s]={exports:{}};e[s][0].call(u.exports,(function(t){return i(e[s][1][t]||t)}),u,u.exports,t,e,r,n)}return r[s].exports}for(var o="function"==typeof require&&require,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(t,e,r){},{}],2:[function(t,e,r){(function(n){(function(){var i,o;i=this,o=function(){var e=e||function(e,r){var i;if("undefined"!=typeof window&&window.crypto&&(i=window.crypto),"undefined"!=typeof self&&self.crypto&&(i=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(i=globalThis.crypto),!i&&"undefined"!=typeof window&&window.msCrypto&&(i=window.msCrypto),!i&&void 0!==n&&n.crypto&&(i=n.crypto),!i&&"function"==typeof t)try{i=t("crypto")}catch(t){}var o=function(){if(i){if("function"==typeof i.getRandomValues)try{return i.getRandomValues(new Uint32Array(1))[0]}catch(t){}if("function"==typeof i.randomBytes)try{return i.randomBytes(4).readInt32LE()}catch(t){}}throw new Error("Native crypto module could not be used to get secure random number.")},s=Object.create||function(){function t(){}return function(e){var r;return t.prototype=e,r=new t,t.prototype=null,r}}(),a={},c=a.lib={},f=c.Base={extend:function(t){var e=s(this);return t&&e.mixIn(t),e.hasOwnProperty("init")&&this.init!==e.init||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},u=c.WordArray=f.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=null!=e?e:4*t.length},toString:function(t){return(t||h).stringify(this)},concat:function(t){var e=this.words,r=t.words,n=this.sigBytes,i=t.sigBytes;if(this.clamp(),n%4)for(var o=0;o<i;o++){var s=r[o>>>2]>>>24-o%4*8&255;e[n+o>>>2]|=s<<24-(n+o)%4*8}else for(var a=0;a<i;a+=4)e[n+a>>>2]=r[a>>>2];return this.sigBytes+=i,this},clamp:function(){var t=this.words,r=this.sigBytes;t[r>>>2]&=4294967295<<32-r%4*8,t.length=e.ceil(r/4)},clone:function(){var t=f.clone.call(this);return t.words=this.words.slice(0),t},random:function(t){for(var e=[],r=0;r<t;r+=4)e.push(o());return new u.init(e,t)}}),p=a.enc={},h=p.Hex={stringify:function(t){for(var e=t.words,r=t.sigBytes,n=[],i=0;i<r;i++){var o=e[i>>>2]>>>24-i%4*8&255;n.push((o>>>4).toString(16)),n.push((15&o).toString(16))}return n.join("")},parse:function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r[n>>>3]|=parseInt(t.substr(n,2),16)<<24-n%8*4;return new u.init(r,e/2)}},d=p.Latin1={stringify:function(t){for(var e=t.words,r=t.sigBytes,n=[],i=0;i<r;i++){var o=e[i>>>2]>>>24-i%4*8&255;n.push(String.fromCharCode(o))}return n.join("")},parse:function(t){for(var e=t.length,r=[],n=0;n<e;n++)r[n>>>2]|=(255&t.charCodeAt(n))<<24-n%4*8;return new u.init(r,e)}},l=p.Utf8={stringify:function(t){try{return decodeURIComponent(escape(d.stringify(t)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(t){return d.parse(unescape(encodeURIComponent(t)))}},y=c.BufferedBlockAlgorithm=f.extend({reset:function(){this._data=new u.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=l.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(t){var r,n=this._data,i=n.words,o=n.sigBytes,s=this.blockSize,a=o/(4*s),c=(a=t?e.ceil(a):e.max((0|a)-this._minBufferSize,0))*s,f=e.min(4*c,o);if(c){for(var p=0;p<c;p+=s)this._doProcessBlock(i,p);r=i.splice(0,c),n.sigBytes-=f}return new u.init(r,f)},clone:function(){var t=f.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0}),g=(c.Hasher=y.extend({cfg:f.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){y.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,r){return new t.init(r).finalize(e)}},_createHmacHelper:function(t){return function(e,r){return new g.HMAC.init(t,r).finalize(e)}}}),a.algo={});return a}(Math);return e},"object"==typeof r?e.exports=r=o():i.CryptoJS=o()}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{crypto:1}],3:[function(t,e,r){var n,i;n=this,i=function(t){var e,r;return r=(e=t).lib.WordArray,e.enc.Base64={stringify:function(t){var e=t.words,r=t.sigBytes,n=this._map;t.clamp();for(var i=[],o=0;o<r;o+=3)for(var s=(e[o>>>2]>>>24-o%4*8&255)<<16|(e[o+1>>>2]>>>24-(o+1)%4*8&255)<<8|e[o+2>>>2]>>>24-(o+2)%4*8&255,a=0;a<4&&o+.75*a<r;a++)i.push(n.charAt(s>>>6*(3-a)&63));var c=n.charAt(64);if(c)for(;i.length%4;)i.push(c);return i.join("")},parse:function(t){var e=t.length,n=this._map,i=this._reverseMap;if(!i){i=this._reverseMap=[];for(var o=0;o<n.length;o++)i[n.charCodeAt(o)]=o}var s=n.charAt(64);if(s){var a=t.indexOf(s);-1!==a&&(e=a)}return function(t,e,n){for(var i=[],o=0,s=0;s<e;s++)if(s%4){var a=n[t.charCodeAt(s-1)]<<s%4*2|n[t.charCodeAt(s)]>>>6-s%4*2;i[o>>>2]|=a<<24-o%4*8,o++}return r.create(i,o)}(t,e,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},t.enc.Base64},"object"==typeof r?e.exports=r=i(t("./core")):i(n.CryptoJS)},{"./core":2}],4:[function(t,e,r){var n,i;n=this,i=function(t){return function(){if("function"==typeof ArrayBuffer){var e=t.lib.WordArray,r=e.init,n=e.init=function(t){if(t instanceof ArrayBuffer&&(t=new Uint8Array(t)),(t instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array)&&(t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength)),t instanceof Uint8Array){for(var e=t.byteLength,n=[],i=0;i<e;i++)n[i>>>2]|=t[i]<<24-i%4*8;r.call(this,n,e)}else r.apply(this,arguments)};n.prototype=e}}(),t.lib.WordArray},"object"==typeof r?e.exports=r=i(t("./core")):i(n.CryptoJS)},{"./core":2}],5:[function(t,e,r){var n,i;n=this,i=function(t){return function(e){var r=t,n=r.lib,i=n.WordArray,o=n.Hasher,s=r.algo,a=[],c=[];!function(){function t(t){for(var r=e.sqrt(t),n=2;n<=r;n++)if(!(t%n))return!1;return!0}function r(t){return 4294967296*(t-(0|t))|0}for(var n=2,i=0;i<64;)t(n)&&(i<8&&(a[i]=r(e.pow(n,.5))),c[i]=r(e.pow(n,1/3)),i++),n++}();var f=[],u=s.SHA256=o.extend({_doReset:function(){this._hash=new i.init(a.slice(0))},_doProcessBlock:function(t,e){for(var r=this._hash.words,n=r[0],i=r[1],o=r[2],s=r[3],a=r[4],u=r[5],p=r[6],h=r[7],d=0;d<64;d++){if(d<16)f[d]=0|t[e+d];else{var l=f[d-15],y=(l<<25|l>>>7)^(l<<14|l>>>18)^l>>>3,g=f[d-2],v=(g<<15|g>>>17)^(g<<13|g>>>19)^g>>>10;f[d]=y+f[d-7]+v+f[d-16]}var _=n&i^n&o^i&o,m=(n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22),w=h+((a<<26|a>>>6)^(a<<21|a>>>11)^(a<<7|a>>>25))+(a&u^~a&p)+c[d]+f[d];h=p,p=u,u=a,a=s+w|0,s=o,o=i,i=n,n=w+(m+_)|0}r[0]=r[0]+n|0,r[1]=r[1]+i|0,r[2]=r[2]+o|0,r[3]=r[3]+s|0,r[4]=r[4]+a|0,r[5]=r[5]+u|0,r[6]=r[6]+p|0,r[7]=r[7]+h|0},_doFinalize:function(){var t=this._data,r=t.words,n=8*this._nDataBytes,i=8*t.sigBytes;return r[i>>>5]|=128<<24-i%32,r[14+(i+64>>>9<<4)]=e.floor(n/4294967296),r[15+(i+64>>>9<<4)]=n,t.sigBytes=4*r.length,this._process(),this._hash},clone:function(){var t=o.clone.call(this);return t._hash=this._hash.clone(),t}});r.SHA256=o._createHelper(u),r.HmacSHA256=o._createHmacHelper(u)}(Math),t.SHA256},"object"==typeof r?e.exports=r=i(t("./core")):i(n.CryptoJS)},{"./core":2}],PKCE:[function(t,e,r){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},n.apply(this,arguments)},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(r,"__esModule",{value:!0});var o=i(t("crypto-js/sha256")),s=i(t("crypto-js/enc-base64")),a=i(t("crypto-js/lib-typedarrays")),c=function(){function t(t){this.state="",this.codeVerifier="",this.config=t}return t.prototype.authorizeUrl=function(t){var e,r;void 0===t&&(t={});var i=new URLSearchParams(Object.assign(n({response_type:(null===(e=this.config)||void 0===e?void 0:e.implicit)?"token":"code",client_id:this.config.client_id,state:this.getState(t.state||null),scope:this.config.requested_scopes,redirect_uri:this.config.redirect_uri},(null===(r=this.config)||void 0===r?void 0:r.implicit)?{}:{code_challenge:this.pkceChallengeFromVerifier(),code_challenge_method:"S256"}),t)).toString();return"".concat(this.config.authorization_endpoint,"?").concat(i)},t.prototype.exchangeForAccessToken=function(t,e){var r=this;return void 0===e&&(e={}),this.parseAuthResponseUrl(t).then((function(i){var o,s;if(null===(o=r.config)||void 0===o?void 0:o.implicit){var a={access_token:"",expires_in:0,refresh_expires_in:0,refresh_token:"",scope:"",token_type:""};return new URL(t).searchParams.forEach((function(t,e){Object.keys(a).indexOf(e)>-1&&(a[e]="number"==typeof a[e]?Number(t):String(t))})),Promise.resolve(Object.assign(a,e))}return fetch(r.config.token_endpoint,{method:"POST",body:new URLSearchParams(Object.assign(n({grant_type:"authorization_code",code:i.code,client_id:r.config.client_id,redirect_uri:r.config.redirect_uri},(null===(s=r.config)||void 0===s?void 0:s.implicit)?{}:{code_verifier:r.getCodeVerifier()}),e)),headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"}}).then((function(t){return t.json()}))}))},t.prototype.getCodeVerifier=function(){return""===this.codeVerifier&&(this.codeVerifier=this.randomStringFromStorage("pkce_code_verifier")),this.codeVerifier},t.prototype.getState=function(t){void 0===t&&(t=null);var e="pkce_state";return null!==t&&this.getStore().setItem(e,t),""===this.state&&(this.state=this.randomStringFromStorage(e)),this.state},t.prototype.parseAuthResponseUrl=function(t){var e=new URL(t).searchParams;return this.validateAuthResponse({error:e.get("error"),query:e.get("query"),state:e.get("state"),code:e.get("code")})},t.prototype.pkceChallengeFromVerifier=function(){var t=(0,o.default)(this.getCodeVerifier());return s.default.stringify(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")},t.prototype.randomStringFromStorage=function(t){return null===this.getStore().getItem(t)&&this.getStore().setItem(t,a.default.random(64)),this.getStore().getItem(t)||""},t.prototype.validateAuthResponse=function(t){var e=this;return new Promise((function(r,n){var i;return t.error?n({error:t.error}):t.state===e.getState()||(null===(i=e.config)||void 0===i?void 0:i.implicit)?r(t):n({error:"Invalid State"})}))},t.prototype.getStore=function(){var t;return(null===(t=this.config)||void 0===t?void 0:t.storage)||sessionStorage},t}();r.default=c,e.exports=c},{"crypto-js/enc-base64":3,"crypto-js/lib-typedarrays":4,"crypto-js/sha256":5}]},{},[])("PKCE")}));
